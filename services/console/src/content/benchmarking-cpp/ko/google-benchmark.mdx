---
title: "Google Benchmark"
description: "Google Benchmark를 사용하여 C++ 코드를 벤치마킹하는 단계별 가이드"
heading: "Google Benchmark로 C++ 코드 벤치마킹하기"
published: "2024-11-03T16:30:00Z"
modified: "2024-11-03T16:30:00Z"
sortOrder: 1
---

import Benchmarking from "../../../chunks/benchmarking/ko/benchmarking.mdx";
import FizzBuzzRules from "../../../chunks/benchmarking/ko/fizz-buzz-rules.mdx";
import FizzBuzzCpp from "../../../chunks/benchmarking-cpp/ko/fizz-buzz-cpp.mdx";
import StepByStepCpp from "../../../chunks/benchmarking-cpp/ko/step-by-step-cpp.mdx";
import MicroVsMacro from "../../../chunks/benchmarking/ko/micro-vs-macro.mdx";
import BenchmarkingCpp from "../../../chunks/benchmarking-cpp/ko/benchmarking-cpp.mdx";
import FizzBuzzRefactor from "../../../chunks/benchmarking-cpp/google-benchmark/ko/fizz-buzz-refactor.mdx";
import BenchmarkingFizzBuzz from "../../../chunks/benchmarking-cpp/google-benchmark/ko/benchmarking-fizz-buzz.mdx";
import FizzBuzzFibonacciCpp from "../../../chunks/benchmarking-cpp/ko/fizz-buzz-fibonacci-cpp.mdx";
import PlayGameCode from "../../../chunks/benchmarking-cpp/google-benchmark/play-game-code.mdx";
import BenchmarkingFizzBuzzFibonacci from "../../../chunks/benchmarking-cpp/google-benchmark/ko/benchmarking-fizz-buzz-fibonacci.mdx";
import FizzBuzzFibonacciOpenCpp from "../../../chunks/benchmarking-cpp/google-benchmark/ko/fizz-buzz-fibonacci-open-cpp.mdx";
import FizzBuzzFibonacciOpenCode from "../../../chunks/benchmarking-cpp/fizz-buzz-fibonacci-open-code.mdx";
import TheEnd from "../../../chunks/benchmarking/ko/the-end.mdx";
import OnFire from "../../../chunks/benchmarking/ko/on-fire.mdx";
import TestGameOnFireCode from "../../../chunks/benchmarking-cpp/google-benchmark/benchmark-game-on-fire-code.mdx";
import BenchmarkGameOnFireOutputStart from "../../../chunks/benchmarking-cpp/google-benchmark/benchmark-game-on-fire-output-start.mdx";
import BenchmarkGameOnFireOutput from "../../../chunks/benchmarking-cpp/google-benchmark/benchmark-game-on-fire-output.mdx";
import FizzBuzzFibonacciFix from "../../../chunks/benchmarking-cpp/google-benchmark/ko/fizz-buzz-fibonacci-fix.mdx";
import BenchmarkGameFixOutput from "../../../chunks/benchmarking-cpp/google-benchmark/benchmark-game-fix-output.mdx";
import CatchInCi from "../../../chunks/benchmarking/ko/catch-in-ci.mdx";
import CatchInCiOutput from "../../../chunks/benchmarking-cpp/google-benchmark/catch-in-ci-output.mdx";
import CatchInCiPlot from "../../../chunks/benchmarking/ko/catch-in-ci-plot.mdx";
import CatchInCiPlotRustBench from "../../../chunks/benchmarking-rust/catch-in-ci-plot-rust-bench.mdx";
import BencherFooter from "../../../chunks/learn/ko/bencher-footer.mdx";

<Benchmarking />

<FizzBuzzCpp />

<StepByStepCpp />

<MicroVsMacro />

<BenchmarkingCpp />

둘 다 [Bencher가 지원합니다](/ko/docs/explanation/adapters/). 그렇다면 왜 Google Benchmark를 선택할까요? Google Benchmark는 GoogleTest와 매끄럽게 통합되며, GoogleTest는 C++ 생태계에서 사실상의 표준 유닛 테스트 하네스입니다. GoogleTest를 이미 사용하고 있다면, 코드의 대기 시간을 벤치마킹하는 데 Google Benchmark를 사용하는 것을 추천합니다. 즉, Google Benchmark는 실제 시간 측정에 매우 유용합니다.

<FizzBuzzRefactor />

<BenchmarkingFizzBuzz />

<FizzBuzzFibonacciCpp>
  <PlayGameCode />
</FizzBuzzFibonacciCpp>

<BenchmarkingFizzBuzzFibonacci />

<FizzBuzzFibonacciOpenCpp>
    <FizzBuzzFibonacciOpenCode />
</FizzBuzzFibonacciOpenCpp>

<TheEnd />

<br />

<OnFire />

<TestGameOnFireCode />

- 숫자 100으로 게임을 실행하는 마이크로 벤치마크 `BENCHMARK_game_100`
- 숫자 1,000,000으로 게임을 실행하는 마이크로 벤치마크 `BENCHMARK_game_1_000_000`

실행 결과는 다음과 같았습니다:

<BenchmarkGameOnFireOutputStart />

기다려 보세요... 기다려 보세요...

<BenchmarkGameOnFireOutput />

뭐라고! `1,249 ns` x `10,000`은 `12,490,000 ns` 여야 하는데 `110,879,642 ns` 이라니 🤯 피보나치 수열 코드가 기능적으로 올바르지만, 성능 버그가 어딘가에 있는 게 분명합니다.

<FizzBuzzFibonacciFix />

이제 벤치마크를 다시 실행해서 어떻게 되었는지 봅시다:

<BenchmarkGameFixOutput />

와! 우리의 `BENCHMARK_game` 벤치마크가 원래의 FizzBuzz 수준으로 돌아왔습니다. 정확히 어떤 점수가 나왔는지 기억하고 싶습니다. 벌써 3주가 지났네요. 터미널 기록은 그 정도까지 가지 않고, Google Benchmark도 결과를 저장하지 않습니다. 하지만 비슷한 것 같습니다!

`BENCHMARK_game_100` 벤치마크는 거의 50배 감소하여 `34.4 ns`를 기록했습니다. 그리고 `BENCHMARK_game_1_000_000` 벤치마크는 1,500,000배 이상 감소했습니다! `110,879,642 ns`에서 `61.6 ns`로!

> 🐰 다행히도 이 성능 버그가 프로덕션에 반영되기 전에 잡았습니다... 아, 맞다. 아니에요...

<CatchInCi />

<CatchInCiOutput />

<CatchInCiPlot />

<CatchInCiPlotRustBench title="Google Benchmark를 사용하여 C++ 벤치마킹하기" />

<BencherFooter />