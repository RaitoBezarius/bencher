---
title: "pytest-benchmark"
description: "Una gu√≠a paso a paso sobre c√≥mo realizar benchmarks en c√≥digo Python con pytest-benchmark"
heading: "C√≥mo realizar benchmarks en c√≥digo Python con pytest-benchmark"
published: "2024-10-09T16:30:00Z"
modified: "2024-10-09T16:30:00Z"
sortOrder: 1
---

import Benchmarking from "../../../chunks/benchmarking/es/benchmarking.mdx";
import FizzBuzzRules from "../../../chunks/benchmarking/es/fizz-buzz-rules.mdx";
import FizzBuzzPython from "../../../chunks/benchmarking-python/es/fizz-buzz-python.mdx";
import StepByStepPython from "../../../chunks/benchmarking-python/es/step-by-step-python.mdx";
import MicroVsMacro from "../../../chunks/benchmarking/es/micro-vs-macro.mdx";
import BenchmarkingPython from "../../../chunks/benchmarking-python/es/benchmarking-python.mdx";
import FizzBuzzRefactor from "../../../chunks/benchmarking-python/pytest-benchmark/es/fizz-buzz-refactor.mdx";
import BenchmarkingFizzBuzz from "../../../chunks/benchmarking-python/pytest-benchmark/es/benchmarking-fizz-buzz.mdx";
import FizzBuzzFibonacciPython from "../../../chunks/benchmarking-python/es/fizz-buzz-fibonacci-python.mdx";
import PlayGameCode from "../../../chunks/benchmarking-python/pytest-benchmark/play-game-code.mdx";
import BenchmarkingFizzBuzzFibonacci from "../../../chunks/benchmarking-python/pytest-benchmark/es/benchmarking-fizz-buzz-fibonacci.mdx";
import FizzBuzzFibonacciOpenPython from "../../../chunks/benchmarking-python/es/fizz-buzz-fibonacci-open-python.mdx";
import FizzBuzzFibonacciOpenCode from "../../../chunks/benchmarking-python/fizz-buzz-fibonacci-open-code.mdx";
import TheEnd from "../../../chunks/benchmarking/es/the-end.mdx";
import OnFire from "../../../chunks/benchmarking/es/on-fire.mdx";
import TestGameOnFireCode from "../../../chunks/benchmarking-python/pytest-benchmark/test-game-on-fire-code.mdx";
import PytestGameOnFireOutputStart from "../../../chunks/benchmarking-python/pytest-benchmark/pytest-game-on-fire-output-start.mdx";
import PytestGameOnFireOutput from "../../../chunks/benchmarking-python/pytest-benchmark/pytest-game-on-fire-output.mdx";
import FizzBuzzFibonacciFix from "../../../chunks/benchmarking-python/pytest-benchmark/es/fizz-buzz-fibonacci-fix.mdx";
import PytestGameFixOutput from "../../../chunks/benchmarking-python/pytest-benchmark/pytest-game-fix-output.mdx";
import CatchInCi from "../../../chunks/benchmarking/es/catch-in-ci.mdx";
import CatchInCiOutput from "../../../chunks/benchmarking-python/pytest-benchmark/catch-in-ci-output.mdx";
import CatchInCiPlot from "../../../chunks/benchmarking/es/catch-in-ci-plot.mdx";
import CatchInCiPlotRustBench from "../../../chunks/benchmarking-rust/catch-in-ci-plot-rust-bench.mdx";
import BencherFooter from "../../../chunks/learn/es/bencher-footer.mdx";

<Benchmarking />

<FizzBuzzPython />

<StepByStepPython />

<MicroVsMacro />

<BenchmarkingPython />

Ambos son [soportados por Bencher](/es/docs/explanation/adapters/).
Entonces, ¬øpor qu√© elegir `pytest-benchmark`?
`pytest-benchmark` se integra perfectamente con `pytest`,
que es el est√°ndar de facto para pruebas unitarias en el ecosistema de Python.
Recomendar√≠a usar `pytest-benchmark` para hacer benchmarking de la latencia de tu c√≥digo,
especialmente si ya est√°s usando `pytest`.
Es decir, `pytest-benchmark` es ideal para medir el tiempo de reloj de pared.

<FizzBuzzRefactor />

<BenchmarkingFizzBuzz />

<FizzBuzzFibonacciPython>
  <PlayGameCode />
</FizzBuzzFibonacciPython>

<BenchmarkingFizzBuzzFibonacci />

<FizzBuzzFibonacciOpenPython>
    <FizzBuzzFibonacciOpenCode />
</FizzBuzzFibonacciOpenPython>

<TheEnd />

<br />

<OnFire />

<TestGameOnFireCode />

- Un micro-benchmark `test_game_100` para jugar el juego con el n√∫mero cien (`100`)
- Un micro-benchmark `test_game_1_000_000` para jugar el juego con el n√∫mero un mill√≥n (`1_000_000`)

Cuando lo ejecut√©, obtuve esto:

<PytestGameOnFireOutputStart />

Espera... espera...

<PytestGameOnFireOutput />

¬øQu√©! `15.8470 us` x `1,000` deber√≠a ser `15,847.0 us` no `571,684.6334 us` ü§Ø
Aunque obtuve mi c√≥digo de la secuencia de Fibonacci funcionalmente correcto, debo tener un error de rendimiento en alg√∫n lugar.

<FizzBuzzFibonacciFix />

Ahora vamos a ejecutar nuevamente esos benchmarks y ver c√≥mo lo hicimos:

<PytestGameFixOutput />

¬°Oh, wow! Nuestro benchmark `test_game` ha vuelto a estar cerca de donde estaba para el FizzBuzz original.
Desear√≠a poder recordar exactamente cu√°l era ese puntaje. Pero han pasado tres semanas.
Mi historial de terminal no retrocede tanto.
Y `pytest-benchmark` solo almacena sus resultados cuando se lo pedimos.
¬°Pero creo que est√° cerca!

El benchmark `test_game_100` ha bajado casi 50x a `322.0815 ns`.
¬°Y el benchmark `test_game_1_000_000` ha bajado m√°s de 500,000x! `571,684,633.4 ns` a `753.1445 ns`!

> üê∞ Al menos atrapamos este error de rendimiento antes de que llegara a producci√≥n... oh, cierto. Olv√≠dalo...

<CatchInCi />

<CatchInCiOutput />

<CatchInCiPlot />

<CatchInCiPlotRustBench title="C√≥mo realizar benchmarks en Python con pytest-benchmark" />

<BencherFooter />