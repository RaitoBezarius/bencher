---
title: "Criterion"
description: "–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—é –±–µ–Ω—á–º–∞—Ä–∫–∞ Rust –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é Criterion"
heading: "–ö–∞–∫ –ø—Ä–æ–≤–µ—Å—Ç–∏ –±–µ–Ω—á–º–∞—Ä–∫ Rust –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é Criterion"
published: "2024-01-28T14:20:00Z"
modified: "2024-02-13T06:50:00Z"
sortOrder: 2
---

import Benchmarking from "../../../chunks/benchmarking/ru/benchmarking.mdx";
import FizzBuzzRules from "../../../chunks/benchmarking/ru/fizz-buzz-rules.mdx";
import FizzBuzzRust from "../../../chunks/rust/ru/fizz-buzz-rust.mdx";
import StepByStepRust from "../../../chunks/rust/ru/step-by-step-rust.mdx";
import MicroVsMacro from "../../../chunks/benchmarking/ru/micro-vs-macro.mdx";
import BenchmarkingRust from "../../../chunks/rust/ru/benchmarking-rust.mdx";
import FizzBuzzRefactor from "../../../chunks/rust/criterion/ru/fizz-buzz-refactor.mdx";
import GameBenchesTree from "../../../chunks/rust/criterion/game-benches-tree.mdx";
import FizzBuzzRefactorBenchesCode from "../../../chunks/rust/criterion/fizz-buzz-refactor-benches-code.mdx";
import GameCargoToml from "../../../chunks/rust/criterion/game-cargo-toml.mdx";
import BenchPlayGameOutput from "../../../chunks/rust/criterion/bench-play-game-output.mdx";
import FizzBuzzFibonacciRust from "../../../chunks/rust/ru/fizz-buzz-fibonacci-rust.mdx";
import PlayGameRustCode from "../../../chunks/rust/criterion/play-game-rust-code.mdx";
import BenchPlayGameFibonacciOutput from "../../../chunks/rust/criterion/bench-play-game-fibonacci-output.mdx";
import FizzBuzzFibonacciOpenRust from "../../../chunks/rust/ru/fizz-buzz-fibonacci-open-rust.mdx";
import FizzBuzzFibonacciOpenRustCode from "../../../chunks/rust/criterion/fizz-buzz-fibonacci-open-rust-code.mdx";
import TheEnd from "../../../chunks/benchmarking/ru/the-end.mdx";
import OnFire from "../../../chunks/benchmarking/ru/on-fire.mdx";
import BenchPlayGameOnFireCode from "../../../chunks/rust/criterion/bench-play-game-on-fire-code.mdx";
import BenchPlayGameOnFireOutputStart from "../../../chunks/rust/criterion/bench-play-game-on-fire-output-start.mdx";
import BenchPlayGameOnFireOutput from "../../../chunks/rust/criterion/bench-play-game-on-fire-output.mdx";
import FizzBuzzFibonacciFixRust from "../../../chunks/rust/ru/fizz-buzz-fibonacci-fix-rust.mdx";
import BenchPlayGameFixOutput from "../../../chunks/rust/criterion/bench-play-game-fix-output.mdx";
import CatchInCi from "../../../chunks/benchmarking/ru/catch-in-ci.mdx";
import CatchInCiOutput from "../../../chunks/rust/criterion/catch-in-ci-output.mdx";
import CatchInCiPlot from "../../../chunks/benchmarking/ru/catch-in-ci-plot.mdx";
import CatchInCiPlotRustBench from "../../../chunks/rust/catch-in-ci-plot-rust-bench.mdx";
import BencherFooter from "../../../chunks/learn/ru/bencher-footer.mdx";

<Benchmarking />

<FizzBuzzRust />

<StepByStepRust />

<MicroVsMacro />

<BenchmarkingRust />

–í—Å–µ —Ç—Ä–∏ [–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è Bencher](/ru/docs/explanation/adapters/). –¢–∞–∫ –ø–æ—á–µ–º—É –≤—ã–±—Ä–∞—Ç—å Criterion?
Criterion - —ç—Ç–æ –¥–µ-—Ñ–∞–∫—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –±–µ–Ω—á–º–∞—Ä–∫–∞ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ Rust.
–Ø –±—ã –ø—Ä–µ–¥–ª–æ–∂–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Criterion –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞.
–¢–æ –µ—Å—Ç—å Criterion –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞.

<FizzBuzzRefactor />

## –ë–µ–Ω—á–º–∞—Ä–∫ –¥–ª—è FizzBuzz

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Å—Ç–∏ –±–µ–Ω—á–º–∞—Ä–∫ –Ω–∞—à–µ–≥–æ –∫–æ–¥–∞, –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `benches` –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–∞—à–∏ –±–µ–Ω—á–º–∞—Ä–∫–∏, `play_game.rs`:

<GameBenchesTree />

–í–Ω—É—Ç—Ä–∏ `play_game.rs` –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

<FizzBuzzRefactorBenchesCode />

- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –±–µ–≥—É–Ω–æ–∫ –¥–ª—è –±–µ–Ω—á–º–∞—Ä–∫–æ–≤ `Criterion`.
- –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `play_game` –∏–∑ –Ω–∞—à–µ–π –ø–æ—Å—Ç–∞–≤–∫–∏ `game`.
- –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `bench_play_game`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–∑–º–µ–Ω—è–µ–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ `Criterion`.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–∫–∑–µ–º–ø–ª—è—Ä `Criterion` (`c`) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–µ–Ω—á–º–∞—Ä–∫–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `bench_play_game`.
- –ó–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–≥—É–Ω–æ–∫ –¥–ª—è –±–µ–Ω—á–º–∞—Ä–∫–∞ (`b`) –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞—à–µ–≥–æ –º–∞–∫—Ä–æ-–±–µ–Ω—á–º–∞—Ä–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑.
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞—à –º–∞–∫—Ä–æ-–±–µ–Ω—á–º–∞—Ä–∫ –≤–Ω—É—Ç—Ä–∏ "—á—ë—Ä–Ω–æ–≥–æ —è—â–∏–∫–∞", —á—Ç–æ–±—ã –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª –Ω–∞—à –∫–æ–¥.
- –ü—Ä–æ–∏—Ç–µ—Ä–∏—Ä—É–π—Ç–µ—Å—å –æ—Ç `1` –¥–æ `100` –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∏—Å–ª–∞ –≤—ã–∑–æ–≤–∏—Ç–µ `play_game`, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ `print` –≤ `false`.

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Å—Ç–∞–≤–∫—É `game` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞—à–∏—Ö –±–µ–Ω—á–º–∞—Ä–∫–æ–≤.

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ –≤ _–Ω–∏–∑_ –≤–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞ `Cargo.toml`:

<GameCargoToml />

- `criterion`: –î–æ–±–∞–≤—å—Ç–µ `criterion` –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ç–∞–∫ –∫–∞–∫ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
- `bench`: –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ `play_game` –∫–∞–∫ –±–µ–Ω—á–º–∞—Ä–∫ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–ª—è `harness` –∑–Ω–∞—á–µ–Ω–∏–µ `false`, —Ç–∞–∫ –∫–∞–∫ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Criterion –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å—Ä–µ–¥—ã –¥–ª—è –±–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥–∞.

–¢–µ–ø–µ—Ä—å –º—ã –≥–æ—Ç–æ–≤—ã –ø—Ä–æ–≤–µ—Å—Ç–∏ –±–µ–Ω—á–º–∞—Ä–∫ –Ω–∞—à–µ–≥–æ –∫–æ–¥–∞, –∑–∞–ø—É—Å—Ç–∏—Ç–µ `cargo bench`:

<BenchPlayGameOutput />

> üê∞ –î–∞–≤–∞–π —Ç—É–¥–∞ –æ–±—Ä–∞—Ç–∏–º! –£ –Ω–∞—Å –µ—Å—Ç—å –ø–µ—Ä–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–Ω—á–º–∞—Ä–∫–∞!

–ù–∞–∫–æ–Ω–µ—Ü –º—ã —Å–º–æ–∂–µ–º –æ—Ç–¥–æ—Ö–Ω—É—Ç—å...
–®—É—Ç–∫–∞ –ª–∏—à—å, –Ω–∞—à–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ö–æ—Ç—è—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é!

<FizzBuzzFibonacciRust>
  <PlayGameRustCode />
</FizzBuzzFibonacciRust>

## –ë–µ–Ω—á–º–∞—Ä–∫ –¥–ª—è FizzBuzzFibonacci

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞—à –±–µ–Ω—á–º–∞—Ä–∫:

<BenchPlayGameFibonacciOutput />

–û, –∫–ª–∞—Å—Å! Criterion —Å–æ–æ–±—â–∞–µ—Ç –Ω–∞–º, —á—Ç–æ —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—à–∏—Ö –∏–≥—Ä FizzBuzz –∏ FizzBuzzFibonacci —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç `+568.69%`.
–í–∞—à–∏ —á–∏—Å–ª–∞ –±—É–¥—É—Ç –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –º–æ–∏—Ö.
–û–¥–Ω–∞–∫–æ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –¥–≤—É–º–∏ –∏–≥—Ä–∞–º–∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø–æ—Ä—è–¥–∫–∞ `5x`.
–ú–Ω–µ —ç—Ç–æ –∫–∞–∂–µ—Ç—Å—è —Ö–æ—Ä–æ—à–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º! –û—Å–æ–±–µ–Ω–Ω–æ —É—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ –º—ã –¥–æ–±–∞–≤–∏–ª–∏ –≤ –Ω–∞—à—É –∏–≥—Ä—É —Ç–∞–∫–æ–π –∑–≤—É—á–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –∫–∞–∫ _Fibonacci_.
–î–µ—Ç—è–º —ç—Ç–æ —Ç–æ—á–Ω–æ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è!

<FizzBuzzFibonacciOpenRust>
  <FizzBuzzFibonacciOpenRustCode />
</FizzBuzzFibonacciOpenRust>

<TheEnd />

<br />

<OnFire />

<BenchPlayGameOnFireCode />

- –ú–∏–∫—Ä–æ-–±–µ–Ω—á–º–∞—Ä–∫ `bench_play_game_100` –¥–ª—è –∏–≥—Ä—ã —Å —á–∏—Å–ª–æ–º —Å—Ç–æ (`100`)
- –ú–∏–∫—Ä–æ-–±–µ–Ω—á–º–∞—Ä–∫ `bench_play_game_1_000_000` –¥–ª—è –∏–≥—Ä—ã —Å —á–∏—Å–ª–æ–º –æ–¥–∏–Ω –º–∏–ª–ª–∏–æ–Ω (`1_000_000`)

–ö–æ–≥–¥–∞ —è —ç—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª, —è –ø–æ–ª—É—á–∏–ª —ç—Ç–æ:

<BenchPlayGameOnFireOutputStart />

–ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ... –ø–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ...

<BenchPlayGameOnFireOutput />

–ß—Ç–æ! `403.57 ns` x `1,000` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `403,570 ns`, –∞ –Ω–µ `9,596,800 ns` (`9.5968 ms` x `1_000_000 ns/1 ms`) ü§Ø
–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —è –ø–æ–ª—É—á–∏–ª –≤–µ—Ä–Ω—ã–π –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –§–∏–±–æ–Ω–∞—á—á–∏, —è, –≤–∏–¥–∏–º–æ, –¥–æ–ø—É—Å—Ç–∏–ª –æ—à–∏–±–∫—É –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ.

<FizzBuzzFibonacciFixRust />

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–º —ç—Ç–∏ –±–µ–Ω—á–º–∞—Ä–∫–∏ –∏ —É–∑–Ω–∞–µ–º, –∫–∞–∫ –º—ã —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å:

<BenchPlayGameFixOutput />

–û–≥–æ! –ù–∞—à –±–µ–Ω—á–º–∞—Ä–∫ `bench_play_game` –≤–µ—Ä–Ω—É–ª—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –∫ —Ç–æ–º—É, –≥–¥–µ –æ–Ω –±—ã–ª –¥–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ FizzBuzz.
–•–æ—Ç–µ–ª–æ—Å—å –±—ã –ø–æ–º–Ω–∏—Ç—å, –∫–∞–∫–∏–µ –±—ã–ª–∏ –∏—Ç–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ. –ù–æ —É–∂–µ –ø—Ä–æ—à–ª–æ —Ç—Ä–∏ –Ω–µ–¥–µ–ª–∏.
–ò—Å—Ç–æ—Ä–∏—è –º–æ–µ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–∞–∫ –¥–æ–ª–≥–æ.
–ê Criterion —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —Å–∞–º—ã–º –ø–æ—Å–ª–µ–¥–Ω–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.
–ù–æ —è –¥—É–º–∞—é, —á—Ç–æ —ç—Ç–æ –±–ª–∏–∑–∫–æ!

–ë–µ–Ω—á–º–∞—Ä–∫ `bench_play_game_100` —Å–Ω–∏–∑–∏–ª—Å—è –ø–æ—á—Ç–∏ –Ω–∞ 10 —Ä–∞–∑, `-93.950%`.
–ê –±–µ–Ω—á–º–∞—Ä–∫ `bench_play_game_1_000_000` —Å–Ω–∏–∑–∏–ª—Å—è –±–æ–ª–µ–µ —á–µ–º –≤ 10,000 —Ä–∞–∑! –° `9,596,800 ns` –¥–æ `30.403 ns`!
–ú—ã –¥–∞–∂–µ –¥–æ—Å—Ç–∏–≥–ª–∏ –º–∞–∫—Å–∏–º—É–º–∞ –Ω–∞ —à–∫–∞–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π Criterion, –∫–æ—Ç–æ—Ä–∞—è –∏–¥–µ—Ç —Ç–æ–ª—å–∫–æ –¥–æ `-100.000%`!

> üê∞ –≠–π, –∫–∞–∫ –º–∏–Ω–∏–º—É–º –º—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —ç—Ç—É –æ—à–∏–±–∫—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø—Ä–µ–∂–¥–µ —á–µ–º –æ–Ω–∞ –ø–æ–ø–∞–ª–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω... –æ–π, –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ù–∏–∫–æ–≥–¥–∞ —Ç–∞–º –∏ –Ω–µ –±—ã–ª–∞...

<CatchInCi />

<CatchInCiOutput />

<CatchInCiPlot />

<CatchInCiPlotRustBench title="–ö–∞–∫ –ø—Ä–æ–≤–µ—Å—Ç–∏ –±–µ–Ω—á–º–∞—Ä–∫ Rust —Å –ø–æ–º–æ—â—å—é Criterion" />

<BencherFooter />
