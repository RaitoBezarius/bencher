import GitClone from "../git-clone.mdx";
import CdBenchmark from "../cd-benchmark.mdx";
import CmakeMakeDirectory from "../cmake-make-directory.mdx"
import CmakeCmake from "../cmake-cmake.mdx";
import CmakeRelease from "../cmake-release.mdx";
import CdBack from "../cd-back.mdx";
import BenchmarkGameCode from "../benchmark-game-code.mdx";
import BenchmarkGameOutput from "../benchmark-game-output.mdx";

## Benchmarking FizzBuzz

Pour √©valuer les performances de notre code, nous devons d'abord installer Google Benchmark.

Clonez la biblioth√®que :

<GitClone />

Acc√©dez au r√©pertoire nouvellement clon√© :

<CdBenchmark />

Utilisez `cmake` pour cr√©er un r√©pertoire de build afin d'y placer le r√©sultat de la construction :

<CmakeMakeDirectory />

Utilisez `cmake` pour g√©n√©rer les fichiers du syst√®me de build et t√©l√©charger toutes les d√©pendances :

<CmakeCmake />

Enfin, construisez la biblioth√®que :

<CmakeRelease />

Revenez au r√©pertoire parent :

<CdBack />

Cr√©ons maintenant un nouveau fichier nomm√© `benchmark_game.cpp` :

<BenchmarkGameCode />

- Importez les d√©finitions de fonction depuis `play_game.h`.
- Importez l'en-t√™te de la biblioth√®que `benchmark` de Google.
- Cr√©ez une fonction nomm√©e `BENCHMARK_game` qui prend en argument une r√©f√©rence √† `benchmark::State`.
- It√©rez sur l'objet `benchmark::State`.
- Pour chaque it√©ration, it√©rez de `1` √† `100` inclusivement.
  - Appelez `play_game` avec le num√©ro actuel et `should_print` d√©fini sur `false`.
- Passez la fonction `BENCHMARK_game` au runner `BENCHMARK`.
- Ex√©cutez le benchmark avec `BENCHMARK_MAIN`.

Nous sommes maintenant pr√™ts √† √©valuer les performances de notre code :

<BenchmarkGameOutput />

> üê∞ Laitue tourner la betterave ! Nous avons nos premiers m√©triques de benchmark !

Enfin, nous pouvons reposer nos t√™tes de d√©veloppeurs fatigu√©es...
Je rigole, nos utilisateurs veulent une nouvelle fonctionnalit√© !