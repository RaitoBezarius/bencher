import CargoTomlSerdeJson from "../cargo-toml-serde-json.mdx";
import PlayGameRsRun from "../play-game-rs-run.mdx";
import PlayGameMain from "../play-game-rs-main.mdx";

### 사용자 정의 벤치마크 실행기 생성

마지막으로, 사용자 정의 벤치마크 하네스를 위한 실행기를 생성해야 합니다.
사용자 정의 벤치마크 하네스는 우리가 작성한 모든 벤치마크를 실행하고 결과를 보고하는 바이너리일 뿐입니다.
벤치마크 실행기는 이 모든 것을 조정하는 역할을 합니다.

결과를 [Bencher Metric Format (BMF) JSON][bmf json] 형식으로 출력하고자 합니다.
이를 위해 마지막으로 하나의 종속성을 추가해야 합니다,
다름 아닌 David Tolnay가 작성한 [serde_json 크레이트][crates serde json]입니다!

<CargoTomlSerdeJson />

다음으로, `CustomBenchmark`가 벤치마크 함수를 실행하고
그 결과를 BMF JSON으로 반환하는 메서드를 구현하겠습니다.

<PlayGameRsRun />

BMF JSON 결과는 각 벤치마크에 대해 여섯 가지 [측정치][measures]를 포함합니다:

- Final Blocks: 벤치마크가 완료될 때 할당된 최종 블록 수.
- Final Bytes: 벤치마크가 완료될 때 할당된 최종 바이트 수.
- Max Blocks: 벤치마크 실행 중 한 번에 할당된 최대 블록 수.
- Max Bytes: 벤치마크 실행 중 한 번에 할당된 최대 바이트 수.
- Total Blocks: 벤치마크 실행 중 할당된 총 블록 수.
- Total Bytes: 벤치마크 실행 중 할당된 총 바이트 수.

마지막으로, `inventory` 컬렉션에 있는 모든 벤치마크를 실행하고
결과를 BMF JSON으로 출력하는 `main` 함수를 작성할 수 있습니다.

<PlayGameMain />

[bmf json]: /ko/docs/reference/bencher-metric-format/
[measures]: /ko/docs/explanation/benchmarking/#measure

[crates serde json]: https://crates.io/crates/serde_json